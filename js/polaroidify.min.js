$(function(){if(!Modernizr.draganddrop){console.error("update your browser. no draganddrop");$.pnotify({title:"HTML5 Drag & Drop not Supported",text:'Your browser does not support HTML5 drag & drop. Please <a href="http://www.google.com/chrome" target="_blank">upgrade your browser</a>.',hide:false});$("#button_dd").addClass("disabled");return}else if(!Modernizr.canvas){console.error("update your browser. no canvas");$.pnotify({title:"HTML5 Canvas not Supported",text:'Your browser does not support HTML5 canvas. Please <a href="http://www.google.com/chrome" target="_blank">upgrade your browser</a>.',hide:false});$("#button_dd").addClass("disabled");return}else if(!Modernizr.filereader){console.error("update your browser. no filereader");$.pnotify({title:"HTML5 File API not Supported",text:'Your browser does not support HTML5 file API. Please <a href="http://www.google.com/chrome" target="_blank">upgrade your browser</a>.',hide:false});$("#button_dd").addClass("disabled");return}var e=$("#file_dd");e.on("dragenter",function(e){$(this).addClass("dd_hilite");e.stopPropagation();e.preventDefault()});e.on("dragover",function(e){e.stopPropagation();e.preventDefault()});e.on("drop",function(e){$(this).removeClass("dd_hilite");e.preventDefault();var t=e.originalEvent.dataTransfer.files[0];n(t)});$("#button_dd").on("click",function(e){$("#fileInput").trigger("click",e)});$(document).on("dragenter",function(e){e.stopPropagation();e.preventDefault()});$(document).on("dragover",function(t){t.stopPropagation();t.preventDefault();e.removeClass("dd_hilite")});$(document).on("drop",function(e){e.stopPropagation();e.preventDefault()});$("#fileInput").on("change",function(e){var t=this.files[0];n(t)});var t=$("#my_img");var n=function(e){if(!e.type.match(/image.*/)){console.log("File not supported!");$.pnotify({title:"Invalid Image Type",text:"Could not process this image type. Please try again with one of these image types: jpeg, png or gif."});return}var n=new FileReader;n.onload=function(e){var r=false;t.removeAttr("width");t.removeAttr("height");var i=new Image;i.onload=function(){if(r)return;r=true;magic_polaroid.main(i,undefined,true,15,function(){$("#download_img").removeClass("hidden");$("#download_img").attr("href",i.src);t.attr("src",i.src)})};i.src=n.result};n.readAsDataURL(e)}})